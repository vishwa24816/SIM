{
  "entities": {
    "Holding": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Holding",
      "type": "object",
      "description": "Represents a user's holding of a specific cryptocurrency.",
      "properties": {
        "userId": { "type": "string" },
        "cryptoId": { "type": "string" },
        "amount": { "type": "number" },
        "margin": { "type": "number" },
        "assetType": { "type": "string" },
        "stopLoss": { "type": "number" },
        "takeProfit": { "type": "number" },
        "trailingStopLoss": { "type": "object", "properties": { "percentage": { "type": "number" } } }
      },
      "required": ["userId", "cryptoId", "amount", "assetType"]
    },
    "LimitOrder": {
        "title": "LimitOrder",
        "type": "object",
        "description": "Represents a limit order set by a user.",
        "properties": {
            "userId": { "type": "string" },
            "instrumentId": { "type": "string" },
            "instrumentName": { "type": "string" },
            "instrumentSymbol": { "type": "string" },
            "assetType": { "type": "string" },
            "action": { "type": "string", "enum": ["BUY", "SELL"] },
            "orderType": { "type": "string", "enum": ["limit"] },
            "price": { "type": "number" },
            "quantity": { "type": "number" },
            "status": { "type": "string", "enum": ["Open", "Executed", "Cancelled"] },
            "stopLoss": { "type": "number" },
            "takeProfit": { "type": "number" },
            "trailingStopLoss": { "type": "object", "properties": { "percentage": { "type": "number" } } },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["userId", "instrumentId", "instrumentName", "instrumentSymbol", "assetType", "action", "orderType", "price", "quantity", "status", "createdAt"]
    },
    "HodlOrder": {
        "title": "HodlOrder",
        "type": "object",
        "description": "Represents a user's long-term cryptocurrency holdings.",
        "properties": {
            "userId": { "type": "string" },
            "instrumentId": { "type": "string" },
            "instrumentName": { "type": "string" },
            "instrumentSymbol": { "type": "string" },
            "assetType": { "type": "string" },
            "quantity": { "type": "number" },
            "price": { "type": "number" },
            "orderType": { "type": "string", "enum": ["limit", "market"] },
            "period": { "type": "object", "properties": { "months": { "type": "number" }, "years": { "type": "number" } } },
            "margin": { "type": "number" },
            "stopLoss": { "type": "number" },
            "takeProfit": { "type": "number" },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["userId", "instrumentId", "instrumentName", "instrumentSymbol", "assetType", "quantity", "price", "orderType", "period", "margin", "createdAt"]
    },
    "SystematicPlan": {
        "title": "SystematicPlan",
        "type": "object",
        "description": "Represents a user's Staking Program participation.",
        "properties": {
            "userId": { "type": "string" },
            "instrumentId": { "type": "string" },
            "instrumentName": { "type": "string" },
            "instrumentSymbol": { "type": "string" },
            "planType": { "type": "string", "enum": ["sip", "swp"] },
            "investmentType": { "type": "string", "enum": ["amount", "qty"] },
            "amount": { "type": "number" },
            "lumpsumAmount": { "type": "number" },
            "frequency": { "type": "string", "enum": ["daily", "weekly", "monthly", "annually"] },
            "status": { "type": "string", "enum": ["active", "paused", "cancelled"] },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["userId", "instrumentId", "instrumentName", "instrumentSymbol", "planType", "investmentType", "amount", "frequency", "status", "createdAt"]
    },
    "Basket": {
        "title": "Basket",
        "type": "object",
        "description": "Represents a user's custom basket of cryptocurrencies.",
        "properties": {
            "userId": { "type": "string" },
            "name": { "type": "string" },
            "items": { 
                "type": "array", 
                "items": {
                    "type": "object",
                    "properties": {
                        "id": { "type": "string" },
                        "name": { "type": "string" },
                        "symbol": { "type": "string" },
                        "assetType": { "type": "string" },
                        "quantity": { "type": "number" },
                        "price": { "type": "number" },
                        "orderType": { "type": "string" },
                        "investmentType": { "type": "string" }
                    },
                    "required": ["id", "name", "symbol", "assetType", "quantity", "price", "orderType", "investmentType"]
                } 
            },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["userId", "name", "items", "createdAt"]
    },
    "Alert": {
      "title": "Alert",
      "type": "object",
      "description": "Represents a price alert set by a user.",
      "properties": {
        "userId": { "type": "string" },
        "cryptoId": { "type": "string" },
        "cryptoSymbol": { "type": "string" },
        "price": { "type": "number" },
        "status": { "type": "string", "enum": ["active", "triggered"] },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "cryptoId", "cryptoSymbol", "price", "status", "createdAt"]
    },
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": { "type": "string" },
        "usdBalance": { "type": "number" }
      },
      "required": ["id", "usdBalance"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous", "google.com"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profile information, including their USD balance."
    },
    "/users/{userId}/holdings/{holdingId}": {
      "schema": { "$ref": "#/entities/Holding" },
      "description": "Stores a user's cryptocurrency holdings. Path-based ownership ensures only the user can access their own holdings."
    },
    "/users/{userId}/limitOrders/{limitOrderId}": {
        "schema": { "$ref": "#/entities/LimitOrder" },
        "description": "Stores a user's limit orders."
    },
    "/users/{userId}/hodlOrders/{hodlOrderId}": {
        "schema": { "$ref": "#/entities/HodlOrder" },
        "description": "Stores a user's HODL orders."
    },
    "/users/{userId}/systematicPlans/{planId}": {
        "schema": { "$ref": "#/entities/SystematicPlan" },
        "description": "Stores a user's systematic investment plans (SIP/SWP)."
    },
    "/users/{userId}/baskets/{basketId}": {
        "schema": { "$ref": "#/entities/Basket" },
        "description": "Stores a user's custom baskets of cryptocurrencies."
    },
    "/users/{userId}/alerts/{alertId}": {
      "schema": { "$ref": "#/entities/Alert" },
      "description": "Stores a user's price alerts."
    }
  }
}
